service: aja-pos

provider:
  name: aws
  runtime: nodejs12.x
  timeout: 60
  region: ap-southeast-1
  stage: ${opt:stage, 'local'}

  environment:
    DB_HOST: localhost
    DB_NAME: aja_pos
    DB_USER: root
    DB_PASSWORD: 
    DB_PORT: 3306 

plugins:
  - serverless-offline

custom:
  allowed-headers:
    - X-Api-Key


functions:
  ROLES:
    handler: src/handlers/roles.handler
    events:
      - http:
          path: /admin/roles
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/roles/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}      
  USERS:
    handler: src/handlers/users.handler
    events:
      - http:
          path: /admin/users
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/users/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}    
  USER_ROLES:
    handler: src/handlers/user_roles.handler
    events:
      - http:
          path: /admin/user_roles
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/user_roles/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}    
