service: aja-pos

provider:
  name: aws
  runtime: nodejs12.x
  timeout: 60
  region: ap-southeast-1
  stage: ${opt:stage, 'local'}

  environment:
    DB_HOST: localhost
    DB_NAME: aja_pos
    DB_USER: root
    DB_PASSWORD:
    DB_PORT: 3306

plugins:
  - serverless-offline

custom:
  allowed-headers:
    - X-Api-Key

functions:
  ROLES:
    handler: src/handlers/roles.handler
    events:
      - http:
          path: /admin/roles
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/roles/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
  USERS:
    handler: src/handlers/users.handler
    events:
      - http:
          path: /admin/users
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/users/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
  PRICINGS:
    handler: src/handlers/pricings.handler
    events:
      - http:
          path: /admin/pricings
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/pricings/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
  PAYMENTS:
    handler: src/handlers/payments.handler
    events:
      - http:
          path: /admin/payments
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/payments/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
  ORDER_ITEMS:
    handler: src/handlers/order_items.handler
    events:
      - http:
          path: /admin/order_items
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
      - http:
          path: /admin/order_items/{proxy+}
          method: ANY
          cors:
            origin: "*"
            headers: ${self:custom.allowed-headers}
